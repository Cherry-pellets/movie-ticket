(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-becb277c"],{6504:function(e,t,r){"use strict";r.r(t);var n=r("1da1"),a=(r("96cf"),r("c24f")),i=r("5c96"),u={name:"UserManage",data:function(){return{tableData:[],total:0,currentPage:1,userInfo:{},dialogFormVisible:!1,dialogTitle:"",labelPosition:"right",input:"",searchInput:"",rules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:function(e,t,r){t?/^1[3|4|5|6|7|8][0-9]{9}$/.test(t)?r():r(new Error("请输入正确格式的手机号码")):r(new Error("请输入手机号码"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},pickerBirthday:{disabledDate:function(e){return e.getTime()>Date.now()}}}},created:function(){this.loadCurrentPageUser(this.currentPage,8,"")},methods:{loadCurrentPageUser:function(e,t,r){var i=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(a.c)({pageNum:e,limit:t,input:r});case 2:u=n.sent,s=u.data,200===u.status&&200===s.state&&(i.tableData=s.data.beanList,i.total=s.data.tr);case 6:case"end":return n.stop()}}),n)})))()},handleEdit:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.MessageBox.confirm("此操作可能禁用该用户, 是否继续？","提示").then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(n){var u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!==n){e.next=7;break}return e.next=3,Object(a.a)({userId:t.id});case 3:u=e.sent,s=u.data,200===u.status&&200===s.state&&(console.log(s),r.loadCurrentPageUser(r.currentPage,8,r.searchInput),i.Message.success("更改成功"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},currentChange:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.currentPage=e,t.loadCurrentPageUser(t.currentPage,8,t.searchInput);case 2:case"end":return r.stop()}}),r)})))()},formatBoolean:function(e,t,r){return r?"是":"否"},cancel:function(){this.loadCurrentPageUser(this.currentPage,8,this.searchInput),this.dialogFormVisible=!1},search:function(){this.searchInput=this.input,this.loadCurrentPageUser(1,8,this.searchInput)}}},s=(r("9a50"),r("2877")),o=Object(s.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-manage"}},[r("div",{staticClass:"top"},[r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"input-with-select",staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1)],1),r("div",{staticClass:"user-table"},[r("el-table",{attrs:{border:"",data:e.tableData}},[r("el-table-column",{attrs:{label:"用户 ID",align:"center",width:"100",prop:"id"}}),r("el-table-column",{attrs:{label:"用户名",align:"center",width:"120","show-overflow-tooltip":"",prop:"nickName"}}),r("el-table-column",{attrs:{label:"性别",align:"center",width:"60",prop:"gender"}}),r("el-table-column",{attrs:{label:"OpenId","show-overflow-tooltip":"",prop:"openId"}}),r("el-table-column",{attrs:{label:"最近登录",align:"center",width:"400",prop:"lastLogin"}}),r("el-table-column",{attrs:{label:"是否禁用",align:"center",width:"60",prop:"isBanned",formatter:e.formatBoolean}}),r("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("禁止/解禁")])]}}])})],1)],1),e.tableData.length?r("div",{staticClass:"block"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":8,"page-count":e.total},on:{"current-change":e.currentChange}})],1):e._e()])}),[],!1,null,"8ad22376",null);t.default=o.exports},"9a50":function(e,t,r){"use strict";r("bab0")},bab0:function(e,t,r){},c24f:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return o}));var n=r("a27e"),a=function(e){return Object(n.a)({url:"/admin/user/getUsers",method:"GET",params:e})},i=function(e){return Object(n.a)({url:"/admin/user/banUser",method:"POST",data:e})},u=function(e){return Object(n.a)({url:"/admin/auser/getAdmins",method:"GET",params:e})},s=function(e){return Object(n.a)({url:"/admin/auser/updateInfo",method:"POST",data:e})},o=function(e){return Object(n.a)({url:"/admin/auser/getOptions",method:"GET",params:e})}}}]);