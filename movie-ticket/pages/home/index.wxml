<!--pages/home/index.wxml-->
<import src="../../templates/loadingMore/loadingMore.wxml"></import>
<view class="container">
  <view>
    <view class="top-bar" style="background-color: #FFF;">
      <navigator class='city-entry'>
        <text class='city-name'>广州</text>
        <text class='city-entry-arrow'></text>
      </navigator>
      <view class="swiper-tab">
        <view class="swiper-tab-item {{currentTab==0?'active':''}}" data-current="0" bindtap="clickTab">热映</view>
        <view class="swiper-tab-item {{currentTab==1?'active':''}}" data-current="1" bindtap="clickTab">待映</view>
      </view>
      <navigator class='search'>
        <text class='iconfont icon-sousuo'></text>
      </navigator>
    </view>
  </view>
  <view class="content">
    <swiper style="height:{{swiperViewHeight}}px" duration="300" current="{{currentTab}}" bindchange="swiperTab"> 
      <!-- 热映 -->
      <swiper-item>
        <!-- <view>111</view> -->
        <!-- 轮播图 -->
        <swiper class="banner" indicator-dots="{{indicatorDots}}" vertical="{{vertical}}"
                autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" bindchange="swiperchange" >
          <block wx:for-items="{{bannerList}}" wx:key="id">
            <swiper-item>
                <image src="{{item.img}}" class="banner-item"/>
            </swiper-item>
          </block>
        </swiper>
        <block wx:for-items="{{itemsShow}}" wx:key="id">
          <navigator>
            <view class="flex item swiperH">
              <view class="item_left">
                  <image src="{{item.img}}"/>
              </view>
              <view class="flex_auto item_middle">
                <view><text class="title">{{item.nm}}</text></view>
                  <view><text class="left_s">评分：</text><text class="score">{{item.sc}}</text></view>
                <view><text class="sub_title">{{item.dra}}</text></view>
                <view><text class="actor">导演：{{item.dir}}</text></view>
              </view>
              <view class="item_right">
                  <view><text class="action">购票</text></view>
              </view>
              </view>
          </navigator>
        </block>
      </swiper-item>
      <!-- 待映 -->
      <swiper-item>
        <scroll-view style="margin-top:10rpx;width:100%;white-space: nowrap;border-bottom: 20rpx solid #f5f5f5;" scroll-x="true">
          <block wx:for-items="{{itemsPop}}" wx:key="id">
            <view style="margin-top:5rpx;margin-bottom:15rpx">
              <navigator style="margin-left:15rpx">
                <view class="popular">
                  <image class="popular-img" src="{{item.img}}"></image>
                  <text class="pop-title">{{item.nm}}</text>
                  <text style="font-size:20rpx;color:#9B9B9B">{{item.wish}}人想看</text>
                  <text style="font-size:20rpx;color:#9B9B9B">{{item.rt}}</text>
                </view>
              </navigator>
            </view>
          </block>
          </scroll-view>
            <block wx:for-items="{{itemsWait}}" wx:key="id">
              <navigator>
                <view class="flex item swiperH">
                    <view class="item_left">
                        <image src="{{item.img}}"/>
                    </view>
                    <view class="flex_auto item_middle">
                        <view><text class="title">{{item.nm}}</text></view>
                        <view><text class="wish">{{item.wish}}</text><text style="font-size: 12px;">人想看</text></view>
                        <view><text class="sub_title">{{item.dra}}</text></view>
                        <view><text class="actor">导演：{{item.dir}}</text></view>
                    </view>
                    <view class="item_right">
                        <view><text class="action" wx:if="{{item.showst==1}}">想看</text></view>
                        <view><text class="action" wx:if="{{item.showst==2}}">预售</text></view>
                    </view>
                </view>
              </navigator>
          </block>
      </swiper-item>
    </swiper>
    <!-- 加载数据时显示loading图 -->
    <view wx:if="{{itemsShow.length>0 && hasMoreHost && currentTab==0}}">
      <template is="loadingMore" />
    </view>
    <view wx:if="{{itemsWait.length>0 && hasMoreWait && currentTab==1}}">
      <template is="loadingMore" />
    </view>
  </view>
</view>